表索引：表的属性的子集的复制品，为了更快地访问并且使用这些属性

数据库确保了表索引中的表的内容和索引的内容在逻辑上是同步的

本节课的主要内容：

b+树概览

b+树在数据库中的使用

设计选择

优化

b+树是一个自我平衡的数据结构，其中的数据是排序好的，允许搜索和顺序访问，插入和删除的时间复杂度都是log(n)

→算是二叉搜索树的一种泛化，因为其一个节点可以拥有超过两个孩子

→优化了系统读写大块磁盘

b+树的特性：

1. M叉搜索树
2. 有非常好的平衡性：每个子结点都在树中的同一层
3. 除了头结点以外的每个几点都是半满状态的：M/2-1 ≤ #key ≤ M-1
4. 每个内节点都有k个键同时有k+1个非空孩子

所有的b+树都是由键值对数组组成的：

→值会因为是头结点或者是内结点而不同

叶子节点的值通常存储的两种方式：

1. 记录id：记录指向一个当前索引关联的元组的地址的指针
2. 元组数据：

→存储一个元组的实际内容

→二级指针必须将记录的id作为它们的存储内容

b-树和b+树的区别：

→b-树在树里的所有结点都存储键值对，这样做更加节省空间，因为一个键在一棵树里只出现一次

→b+树只在叶子结点里存储值，内结点只起到导向作用

b+树对重复键的处理方法：

1. 添加记录id：

→向键里添加该元组的独特的记录id来确保所有的键都是独特的

→可以使数据库通过额外添加的部分来找到元组

1. 溢出子结点：

→允许子结点溢出到溢出的子结点来包含重复的键

→这样做对维护和修改数据库里的数据会更加复杂

集中查询中间结点的方法：

1. 线性
2. 二叉化
3. 添写

优化的几种方法：

1. 前缀压缩
2. 解复制
3. 大量插入：对于一个已经存在的表，最快构建一颗新的二叉树的方法就是先存储键（排序）然后自底向上开始构建