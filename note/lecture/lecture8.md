这节课的主要内容：

门锁概览

哈希表门锁

b+树门锁

叶子节点的扫描

门锁的各种实现方式：

1. 阻塞互斥锁（os）
2. 测试-设置固定的锁存器
3. 读者-写者锁存器

哈希表门锁：

1. 页锁
2. 槽锁

b+树门锁：双重锁

基本思想：

→获得父母的锁

→获得孩子的锁

→安全情况下释放父母的锁

安全的锁是在发生更新时不会分裂或者合并的锁，即插入时还没有达到半满状态或者删除时大于半满状态

![image1](/image/lecture8/image1.png)

在插入或者删除时每次都需要获取头结点的写锁是获得更高性能的同步性的一大瓶颈